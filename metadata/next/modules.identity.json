{"name":"Modules.Identity","summary":"<p>Allows a Titanium application to use the iOS Touch ID / Face ID authentication mechanism.</p>\n","extends":"Titanium.Module","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"module","editUrl":"https://github.com/appcelerator/titanium_mobile/edit/master/apidoc/Identity.yml","methods":[{"name":"authenticate","summary":"<p>Initiates the biometric authentication process.</p>\n","description":"<p>A special note for Android:</p>\n<p>When you call this method in Android, it will either authenticate the fingerprint or it will fallback\nto the device's password, pin or pattern which is the case when biometric means of identification is\nnot available. If you provide an incorrect fingerprint and receive an error message &quot;Unable to recognize\nfingerprint&quot;, do not call authenticate. Instead, get the user to try again. If you call authenticate,\nit will end up in a bad state. This flow will be improved in the next update for Android.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"parameters":[{"name":"params","summary":"<p>Dictionary of arguments passed to the method, e.g. the reason to autheicate and the callback.</p>\n","type":"IdentityAuthenticationType"}],"returns":{"type":"void"}},{"name":"createKeychainItem","summary":"<p>Create KeychainItem.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"parameters":[{"name":"params","summary":"<p>Dictionary of arguments passed to the method.</p>\n","type":"KeychainItemType"}],"returns":{"type":"void"}},{"name":"deviceCanAuthenticate","summary":"<p>Checks to see if device is configured for biometric authentication.</p>\n","description":"<p>On Android this takes into account the <code>authenticationPolicy</code>.</p>\n<p>Example:</p>\n<!--beforebegin--><div class=\"language-javascript extra-class\"><!--afterbegin--><pre v-pre class=\"language-javascript\"><code><span class=\"token keyword\">var</span> Identity <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ti.identity\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> Identity<span class=\"token punctuation\">.</span><span class=\"token function\">deviceCanAuthenticate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>result<span class=\"token punctuation\">.</span>canAuthenticate<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Message: '</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">.</span>error <span class=\"token operator\">+</span> <span class=\"token string\">'\\nCode: '</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Device can authenticate'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend-->","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"returns":{"type":"DeviceCanAuthenticateResult"}},{"name":"invalidate","summary":"<p>Invalidates the current biometric dialog.</p>\n","description":"<p>The context is invalidated automatically when it is (auto)released.</p>\n<p>This method allows invalidating it manually while it is still in scope.\nInvalidation terminates any existing policy evaluation and the respective call will\nfail with <a href=\"/api/modules/identity.html#error_app_cancelled\">ERROR_APP_CANCELLED</a>. After the context has been invalidated, it can not be\nused for policy evaluation and an attempt to do so will fail with <a href=\"/api/modules/identity.html#error_invalid_context\">ERROR_INVALID_CONTEXT</a>.</p>\n<p>See the &quot;Lifetime Notes (iOS-only)&quot; paragraph in the module paragraph for more infos.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"returns":{"type":"void"}},{"name":"isSupported","summary":"<p>Determines if the current device supports Touch ID or Face ID.</p>\n","description":"<p>This module is only supported on Android 6.0 or newer. So, this method always returns\n<code>false</code> on older versions of Android.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"returns":{"type":"Boolean"}}],"properties":[{"name":"authenticationPolicy","summary":"<p>Sets the global authentication policy used in this Touch ID / Face ID context.</p>\n","description":"<p>You should set this property before checking the availability or\nstarting the authentication. By default, <code>AUTHENTICATION_POLICY_BIOMETRICS</code>\nwill be used to authenticate using the Touch ID / Face ID sensor only. Using the\n<code>AUTHENTICATION_POLICY_PASSCODE</code> constant will still try to authenticate\nwith Touch ID / Face ID first and use the passcode as the fallback.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","default":"Modules.Identity.AUTHENTICATION_POLICY_BIOMETRICS","constants":["Modules.Identity.AUTHENTICATION_POLICY_PASSCODE","Modules.Identity.AUTHENTICATION_POLICY_BIOMETRICS","Modules.Identity.AUTHENTICATION_POLICY_BIOMETRICS_OR_WATCH","Modules.Identity.AUTHENTICATION_POLICY_WATCH"]},{"name":"biometryType","summary":"<p>Indicates the type of the biometry supported by the device.</p>\n","description":"<p>This property is set only when <a href=\"/api/modules/identity.html#issupported\">isSupported</a> succeeds for a biometric policy.\nThe default value is <a href=\"/api/modules/identity.html#biometry_type_none\">BIOMETRY_TYPE_NONE</a>.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","default":"Modules.Identity.BIOMETRY_TYPE_NONE","permission":"read-only","constants":["Modules.Identity.BIOMETRY_TYPE_NONE","Modules.Identity.BIOMETRY_TYPE_FACE_ID","Modules.Identity.BIOMETRY_TYPE_TOUCH_ID"]}],"events":[],"constants":[{"name":"ACCESS_CONTROL_AND","summary":"<p>Constraint logic operation - When using more than one constraint, all must\nbe satisfied.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ACCESS_CONTROL_APPLICATION_PASSWORD","summary":"<p>Security: Application provided password for data encryption key generation.\nThis is not a constraint but additional item encryption mechanism.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ACCESS_CONTROL_DEVICE_PASSCODE","summary":"<p>Constraint - Device passcode.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ACCESS_CONTROL_OR","summary":"<p>Constraint logic operation - When using more than one constraint, at least\none of them must be satisfied.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ACCESS_CONTROL_PRIVATE_KEY_USAGE","summary":"<p>Create access control for private key operations (i.e. sign operation).</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ACCESS_CONTROL_TOUCH_ID_ANY","summary":"<p>Constraint - Touch ID (any finger). Touch ID must be available and at least\none finger must be enrolled. Item is still accessible by Touch ID even if\nfingers are added or removed.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ACCESS_CONTROL_TOUCH_ID_CURRENT_SET","summary":"<p>Constraint - Touch ID from the set of currently enrolled fingers. Touch ID\nmust be available and at least one finger must be enrolled. When fingers\nare added or removed, the item is invalidated.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ACCESS_CONTROL_USER_PRESENCE","summary":"<p>User presence policy using Touch ID, Face ID or Passcode. Touch ID / Face ID does not have\nto be available or enrolled. Item is still accessible by Touch ID / Face ID even\nif fingers are added or removed.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ACCESSIBLE_AFTER_FIRST_UNLOCK","summary":"<p>Item data can only be accessed once the device has been unlocked after\na restart.  This is recommended for items that need to be accesible by\nbackground applications. Items with this attribute will migrate to a new\ndevice when using encrypted backups.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"String","permission":"read-only"},{"name":"ACCESSIBLE_AFTER_FIRST_UNLOCK_THIS_DEVICE_ONLY","summary":"<p>Item data can only be accessed once the device has been unlocked after a\nrestart. This is recommended for items that need to be accessible by\nbackground applications. Items with this attribute will never migrate to\na new device, so after a backup is restored to a new device these items\nwill be missing.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"String","permission":"read-only"},{"name":"ACCESSIBLE_ALWAYS","summary":"<p>Item data can always be accessed regardless of the lock state of the device.\nThis is not recommended for anything except system use. Items with this\nattribute will migrate to a new device when using encrypted backups.</p>\n","description":"<p>Value is a Number on Android, a String on iOS.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":["Number","String"],"permission":"read-only"},{"name":"ACCESSIBLE_ALWAYS_THIS_DEVICE_ONLY","summary":"<p>Item data can always be accessed regardless of the lock state of the device.\nThis option is not recommended for anything except system use. Items with\nthis attribute will never migrate to a new device, so after a backup is\nrestored to a new device, these items will be missing.</p>\n","description":"<p>Value is a Number on Android, a String on iOS.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":["Number","String"],"permission":"read-only"},{"name":"ACCESSIBLE_WHEN_PASSCODE_SET_THIS_DEVICE_ONLY","summary":"<p>Item data can only be accessed while the device is unlocked. This class\nis only available if a passcode is set on the device. This is recommended\nfor items that only need to be accessible while the application is in the\nforeground. Items with this attribute will never migrate to a new\ndevice, so after a backup is restored to a new device, these items\nwill be missing. No items can be stored in this class on devices\nwithout a passcode. Disabling the device passcode will cause all\nitems in this class to be deleted.</p>\n","description":"<p>Value is a Number on Android, a String on iOS.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":["Number","String"],"permission":"read-only"},{"name":"ACCESSIBLE_WHEN_UNLOCKED","summary":"<p>Item data can only be accessed while the device is unlocked. This is\nrecommended for items that only need be accesible while the application\nis in the foreground.  Items with this attribute will migrate to a new\ndevice when using encrypted backups.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"String","permission":"read-only"},{"name":"ACCESSIBLE_WHEN_UNLOCKED_THIS_DEVICE_ONLY","summary":"<p>Item data can only be accessed while the device is unlocked. This is\nrecommended for items that only need be accesible while the application\nis in the foreground. Items with this attribute will never migrate to a\nnew device, so after a backup is restored to a new device, these items\nwill be missing.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"String","permission":"read-only"},{"name":"AUTHENTICATION_POLICY_BIOMETRICS","summary":"<p>Device owner was authenticated using a biometric method.</p>\n","description":"<p>A biometric authentication is required. If there are no biometrics available or not\nenrolled, policy evaluation will fail. If Touch ID / Face ID is locked out, passcode\nis required as the first step to unlock with Touch ID.</p>\n<p>Touch ID authentication dialog contains a cancel button with default title\n&quot;Cancel&quot; which can be customized using <code>cancelTitle</code> property and a fallback\nbutton with default title &quot;Enter Password&quot; which can be customized using\n<code>fallbackTitle</code> property. Fallback button is initially hidden and shows up\nafter first unsuccessful Touch ID attempt. Tapping cancel button or fallback\nbutton causes evaluatePolicy call to fail, returning a distinct error code.</p>\n<p>Biometric authentication will get locked after 5 unsuccessful attempts.\nAfter that, users have to unlock it by entering passcode.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"AUTHENTICATION_POLICY_BIOMETRICS_OR_WATCH","summary":"<p>Device owner was authenticated using a biometric method or the Apple Watch.</p>\n","platforms":[{"since":"9.0.0","name":"iphone"},{"since":"9.0.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"AUTHENTICATION_POLICY_PASSCODE","summary":"<p>Device owner was authenticated by Touch ID or device passcode.</p>\n","description":"<p>Touch ID or passcode authentication is required. If Touch ID is available,\nenrolled and not locked out, user is asked for it first, otherwise they are\nasked to enter device passcode. If passcode is not enabled, policy evaluation\nwill fail.</p>\n<p>Touch ID authentication dialog behaves similarly as the one used by\n<code>AUTHENTICATION_POLICY_BIOMETRICS</code>. However, instead of &quot;Enter Password&quot;\nbutton there is &quot;Enter Passcode&quot; button which, when tapped, switches the\nauthentication method and allows users to enter device passcode.</p>\n<p>Passcode authentication will get locked after 6 unsuccessful attempts with\nprogressively increased backoff delay.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"AUTHENTICATION_POLICY_WATCH","summary":"<p>Device owner was authenticated using the Apple Watch.</p>\n","platforms":[{"since":"9.0.0","name":"iphone"},{"since":"9.0.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"BIOMETRY_TYPE_FACE_ID","summary":"<p>The device supports Face ID.</p>\n","description":"<p>Used as a return-value for <a href=\"/api/modules/identity.html#biometrytype\">biometryType</a>.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"BIOMETRY_TYPE_NONE","summary":"<p>The device does not support biometry.</p>\n","description":"<p>Used as a return-value for <a href=\"/api/modules/identity.html#biometrytype\">biometryType</a>.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"BIOMETRY_TYPE_TOUCH_ID","summary":"<p>The device supports Touch ID.</p>\n","description":"<p>Used as a return-value for <a href=\"/api/modules/identity.html#biometrytype\">biometryType</a>.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ERROR_APP_CANCELLED","summary":"<p>Constant indicating that the app cancelled authentication.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ERROR_AUTHENTICATION_FAILED","summary":"<p>Constant indicating that the authentication was not successful.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ERROR_BIOMETRY_LOCKOUT","summary":"<p>Authentication was not successful, because there were too many failed biometry\nattempts and biometry is now locked. Passcode is required to unlock biometry,\ne.g. evaluating <a href=\"/api/modules/identity.html#authenticate\">authenticate</a> will ask for passcode as a prerequisite.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ERROR_BIOMETRY_NOT_AVAILABLE","summary":"<p>Authentication could not start, because biometry is not available on the device.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ERROR_BIOMETRY_NOT_ENROLLED","summary":"<p>Authentication could not start, because biometry has no enrolled identities.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ERROR_INVALID_CONTEXT","summary":"<p>Constant indicating that there is an invalid context.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ERROR_PASSCODE_NOT_SET","summary":"<p>Constant indicating that the passcode is not set for the device.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ERROR_SYSTEM_CANCEL","summary":"<p>Constant indicating that iOS cancelled authentication, for example, if another\napplication enters the foreground.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ERROR_TOUCH_ID_LOCKOUT","deprecated":{"notes":"<p>This constant has deprecated in iOS. Use <a href=\"/api/modules/identity.html#error_biometry_lockout\">ERROR_BIOMETRY_LOCKOUT</a> instead.</p>\n","since":"10.0.0"},"summary":"<p>Constant indicating that Touch ID has locked out.\nNote: This constant has been deprecated for iOS 11 and later. Use\n<a href=\"/api/modules/identity.html#error_biometry_lockout\">ERROR_BIOMETRY_LOCKOUT</a> for apps targeting iOS 11\nand later.</p>\n","platforms":[{"since":"6.3.0","name":"android"},{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ERROR_TOUCH_ID_NOT_AVAILABLE","deprecated":{"notes":"<p>Use <a href=\"/api/modules/identity.html#error_biometry_not_available\">ERROR_BIOMETRY_NOT_AVAILABLE</a> instead.</p>\n","since":"10.0.0"},"summary":"<p>Constant indicating that Touch ID is not available on the device.\nNote: This constant has been deprecated for iOS 11 and later. Use\n<a href=\"/api/modules/identity.html#error_biometry_not_available\">ERROR_BIOMETRY_NOT_AVAILABLE</a> for apps targeting iOS 11\nand later.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ERROR_TOUCH_ID_NOT_ENROLLED","deprecated":{"notes":"<p>Use <a href=\"/api/modules/identity.html#error_biometry_not_enrolled\">ERROR_BIOMETRY_NOT_ENROLLED</a> instead.</p>\n","since":"10.0.0"},"summary":"<p>Constant indicating that Touch ID does not have any enrolled fingerprints.\nNote: This constant has been deprecated for iOS 11 and later. Use\n&lt;Modules.Identity.ERROR_BIOMETRY_NOT_ENROLLED for apps targeting iOS 11\nand later.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ERROR_USER_CANCEL","summary":"<p>Constant indicating that the user canceled authentication.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"},{"name":"ERROR_USER_FALLBACK","summary":"<p>Constant indicating that the user tapped the fallback button to enter their passcode.</p>\n","platforms":[{"since":"6.3.0","name":"iphone"},{"since":"6.3.0","name":"ipad"}],"type":"Number","permission":"read-only"}]}
