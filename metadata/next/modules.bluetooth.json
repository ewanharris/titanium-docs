{"name":"Modules.Bluetooth","summary":"<p>Allows a Titanium application to use Bluetooth service.</p>\n","extends":"Titanium.Module","platforms":[{"since":"1.0.0","name":"android"}],"type":"module","editUrl":"https://github.com/appcelerator/titanium_mobile/edit/master/apidoc/Bluetooth.yml","events":[{"name":"deviceFound","summary":"<p>Fired when the local Bluetooth adapter discovers a device.</p>\n","description":"<p>This event may get called several times for the same Bluetooth device in the range.\nFor not listing the same Bluetooth device many times, one should add a check before adding it to\nthe list. You can do following to avoid the above.</p>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code>// Extract the device from this event properties.\n  var device = e.device;\n  var numRows = btDevicesListSection.rowCount; // count the number of rows in the section where rows are added.\n  if(numRows &gt; 0)\n  {\n    var rowArray = btDevicesListSection.rows; // Extract all the rows into an array.\n    for(var i =0; i&lt; numRows; i++)\n    {\n      //Check if the already added row with the id is same as newly found device.\n      // The id is the property of the row. You should add device address into it.\n      if(rowarray[i].id == device.address) \n      {\n        //update the device info. Some devices might get updated and changed the friendly name.\n        return;\n      }\n    }\n  }          \n</code></pre>\n<!--beforeend--></div><!--afterend-->","platforms":[{"since":"1.0.0","name":"android"}],"properties":[{"name":"device","summary":"<p>The discovered Bluetooth device.</p>\n","type":"Modules.Bluetooth.BluetoothDevice"},{"name":"RSSI","summary":"<p>The RSSI value at the time of device discovery.</p>\n","type":"Number"},{"name":"source","summary":"<p>Source object that fired the event.</p>\n","type":"Object"},{"name":"type","summary":"<p>Name of the event fired.</p>\n","type":"String"},{"name":"bubbles","summary":"<p>True if the event will try to bubble up if possible.</p>\n","type":"Boolean"},{"name":"cancelBubble","summary":"<p>Set to true to stop the event from bubbling.</p>\n","type":"Boolean"}]},{"name":"discoveryFinished","summary":"<p>Fired when the local Bluetooth adapter finished discovery.</p>\n","platforms":[{"since":"1.0.0","name":"android"}]},{"name":"discoveryStarted","summary":"<p>Fired when the local Bluetooth adapter started discovery.</p>\n","platforms":[{"since":"1.0.0","name":"android"}]},{"name":"stateChanged","summary":"<p>Fired when the state of the local Bluetooth adapter changes.</p>\n","description":"<p>Most possible reason for this event to occur is either bluetooth is turning on or off.</p>\n","platforms":[{"since":"1.0.0","name":"android"}]}],"methods":[{"name":"cancelDiscovery","summary":"<p>Cancels the current device discovery process.</p>\n","description":"<p>As discovery is a heavyweight procedure for the Bluetooth adapter, this method should\nalways be called before attempting to connect to a remote device via <a href=\"/api/modules/bluetooth/bluetoothsocket.html#connect\">connect</a>.\nDiscovery is run as a system service, so an application should always call cancel discovery\neven if it did not directly request a discovery, just to be sure. If Bluetooth state is not\n<a href=\"/api/modules/bluetooth.html#state_on\">STATE_ON</a> or if there is no ongoing discovery process this\nfunction will return false. Listen for the <a href=\"/api/modules/bluetooth.html#discoveryfinished\">discoveryFinished</a>\nevent to be notified when the device discovery process finished.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"returns":{"summary":"<p>true on success, false on error</p>\n","type":"Boolean"}},{"name":"checkBluetoothAddress","summary":"<p>Validates a Bluetooth address, such as &quot;00:43:A8:23:10:F0&quot;. Alphabetic characters must be uppercase to be valid.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"parameters":[{"name":"address","summary":"<p>a string representing the address, such as &quot;00:43:A8:23:10:F0&quot;.</p>\n","type":"String"}],"returns":{"summary":"<p>Returns true if the address is valid, false otherwise.</p>\n","type":"Boolean"}},{"name":"createServerSocket","summary":"<p>Creates an object of <a href=\"/api/modules/bluetooth/bluetoothserversocket.html\">Modules.Bluetooth.BluetoothServerSocket</a> which can be used to listen for incoming connections.</p>\n","description":"<p>This method, when called, creates an object of <a href=\"/api/modules/bluetooth/bluetoothserversocket.html\">Modules.Bluetooth.BluetoothServerSocket</a>\nwhich can be used to listen for the incoming connection and accept it by calling the\n<a href=\"/api/modules/bluetooth/bluetoothserversocket.html#startaccept\">startAccept</a> method. This method\nreturns null, if Bluetooth is not supported on the device.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"parameters":[{"name":"params","summary":"<p>Dictionary which contains value for name, uuid and security level.</p>\n","type":"ServerSocketType"}],"returns":{"summary":"<p>listening socket for the device</p>\n","type":"Modules.Bluetooth.BluetoothServerSocket"}},{"name":"disable","summary":"<p>Disables the local Bluetooth adapter.</p>\n","description":"<p>Listen for the <a href=\"/api/modules/bluetooth.html#statechanged\">stateChanged</a> event to be notified when the local\nBluetooth adapter is turning off.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"returns":{"summary":"<p>Returns true if the process is initiated successfully or when the bluetooth is already off.</p>\n","type":"Boolean"}},{"name":"enable","summary":"<p>Enables the local Bluetooth adapter.</p>\n","description":"<p>Listen for the <a href=\"/api/modules/bluetooth.html#statechanged\">stateChanged</a> event to be notified when the local\nBluetooth adapter is turning on.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"returns":{"summary":"<p>Returns true if the process is initiated successfully or when the bluetooth is already on.</p>\n","type":"Boolean"}},{"name":"ensureDiscoverable","summary":"<p>Make the local device discoverable to other devices.</p>\n","description":"<p>Displays a system activity that asks the user for permission to make the local device discoverable\nby other devices, and to turn on Bluetooth if it is not currently enabled.\nChange the scan mode to <a href=\"/api/modules/bluetooth.html#scan_mode_connectable_discoverable\">SCAN_MODE_CONNECTABLE_DISCOVERABLE</a>.\nBy default, the device becomes discoverable for 300 seconds, or 5 minutes. You can define a\ndifferent duration, up to 3600 seconds or 1 hour.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"parameters":[{"name":"interval","summary":"<p>It represents the time duration in seconds to make local device discoverable.</p>\n","type":"Number","optional":true}],"returns":{"type":"void"}},{"name":"getName","summary":"<p>Gets the friendly Bluetooth name of the local Bluetooth adapter.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"returns":{"summary":"<p>Name of the local Bluetooth adapter. In case of error it can be null.</p>\n","type":"String"}},{"name":"getPairedDevices","summary":"<p>This method is use to get the devices that are paired to the local Bluetooth adapter.</p>\n","description":"<p>Returns the <a href=\"/api/structs/paireddevicestype.html\">PairedDevicesType</a>. In this if the paired devices are\nsuccessfully fetched then the <a href=\"/api/structs/paireddevicestype.html#success\">success</a> will be true and can get\narray of paired devices with the <a href=\"/api/structs/paireddevicestype.html#paireddevices\">pairedDevices</a>.\nIf it is false then we can get description of it via <a href=\"/api/structs/paireddevicestype.html#message\">message</a>\nIf there's any issue fetching paired device, or if there no paired devices then this methods\nreturn false. Refer <a href=\"/api/structs/paireddevicestype.html#message\">message</a> for detailed reason of failure.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"returns":{"summary":"<p>Dictionary of arguments passed by the method, e.g. success, message and pairedDevices</p>\n","type":"PairedDevicesType"}},{"name":"getRemoteDevice","summary":"<p>Get a <a href=\"/api/modules/bluetooth/bluetoothdevice.html\">Modules.Bluetooth.BluetoothDevice</a> object for the given Bluetooth hardware address.</p>\n","description":"<p>If Bluetooth is not supported on the device, this method return null.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"parameters":[{"name":"address","summary":"<p>Valid Bluetooth hardware addresses must be upper case, in a format such as &quot;00:11:22:33:AA:BB&quot;..</p>\n","type":"String"}],"returns":{"summary":"<p>Object of the <a href=\"/api/modules/bluetooth/bluetoothdevice.html\">Modules.Bluetooth.BluetoothDevice</a></p>\n","type":"Modules.Bluetooth.BluetoothDevice"}},{"name":"isDiscovering","summary":"<p>Determines whether the local Bluetooth adapter is currently in the device discovery process or not.</p>\n","description":"<p>Device discovery is a heavyweight procedure. New connections to remote Bluetooth devices\nshould not be attempted while discovery is in progress, and existing connections will\nexperience limited bandwidth and high latency. Use <a href=\"/api/modules/bluetooth.html#canceldiscovery\">cancelDiscovery</a>\nto cancel an ongoing discovery. If Bluetooth is not supported on the device or Bluetooth\nstate is not <a href=\"/api/modules/bluetooth.html#state_on\">STATE_ON</a> this function will return false.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"returns":{"summary":"<p>true if the local Bluetooth adapter is currently in the device discovery process.</p>\n","type":"Boolean"}},{"name":"isEnabled","summary":"<p>Determines if Bluetooth is currently enabled and ready for use.</p>\n","description":"<p>If Bluetooth is not supported on the device, this method will return false.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"returns":{"summary":"<p>Returns true if the local adapter is on.</p>\n","type":"Boolean"}},{"name":"isRequiredPermissionsGranted","summary":"<p>Determines whether the required permissions are granted or not.</p>\n","description":"<p>Checks if the following permissions are defined and have been granted by the user:</p>\n<ul>\n<li><code>android.permission.ACCESS_FINE_LOCATION</code></li>\n<li><code>android.permission.BLUETOOTH</code></li>\n<li><code>android.permission.BLUETOOTH_ADMIN</code></li>\n<li><code>android.permission.BLUETOOTH_ADVERTISE</code></li>\n<li><code>android.permission.BLUETOOTH_CONNECT</code></li>\n<li><code>android.permission.BLUETOOTH_SCAN</code></li>\n</ul>\n<p>If this method returns <code>false</code>, then you should call the\n<a href=\"/api/modules/bluetooth.html#requestpermissions\">requestPermissions</a> method to display a dialog\nrequesting permissions from the user.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"returns":{"summary":"<p>Returns true if all the permissions are granted.</p>\n","type":"Boolean"}},{"name":"isSupported","summary":"<p>Determines whether Bluetooth is supported on the local Bluetooth device.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"returns":{"summary":"<p>Returns true if Bluetooth is supported on the device, false otherwise.</p>\n","type":"Boolean"}},{"name":"requestAccessFinePermission","summary":"<p>Displays a dialog requesting location permission from the user.</p>\n","description":"<p>Displays a dialog requesting the user for the <code>ACCESS_FINE_LOCATION</code> permission.\nThis permission is required by the <a href=\"/api/modules/bluetooth.html#startdiscovery\">startDiscovery</a> method.\nThe dialog will not be dispayed if permission has already been granted.</p>\n<p>The given optional callback argument and returned <code>Promise</code> will provide a <code>success</code> property\nindicating if permission was granted or not.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"parameters":[{"name":"callback","summary":"<p>Function to be invoked indicating if permission was granted or not.</p>\n","type":"Callback<Titanium.Android.RequestPermissionAccessResult>","optional":true}],"returns":{"summary":"<p>As of 2.0.0, this method will return a <code>Promise</code> whose resolved value is equivalent to that passed to the optional callback argument.</p>\n","type":"Promise<Titanium.Android.RequestPermissionAccessResult>"}},{"name":"requestPermissions","summary":"<p>Displays a dialog requesting all permissions needed by the bluetooth module from the user.</p>\n","description":"<p>Displays a dialog requesting the user for the <code>ACCESS_FINE_LOCATION</code> permission.\nWill also request the <code>BLUETOOTH_ADVERTISE</code>, <code>BLUETOOTH_CONNECT</code>, and <code>BLUETOOTH_SCAN</code> permissions\nif running on Android 12 or higher. These permission are required by this module to\ndiscover devices and to make the app's device discoverable by other devices.</p>\n<p>The given optional callback argument and returned <code>Promise</code> will provide a <code>success</code> property\nindicating if permissions were granted or not.</p>\n","platforms":[{"since":"2.0.0","name":"android"}],"parameters":[{"name":"callback","summary":"<p>Function to be invoked indicating if permissions were granted or not.</p>\n","type":"Callback<Titanium.Android.RequestPermissionAccessResult>","optional":true}],"returns":{"summary":"<p>Returns a <code>Promise</code> whose resolved value is equivalent to that passed to the optional callback argument.</p>\n","type":"Promise<Titanium.Android.RequestPermissionAccessResult>"}},{"name":"setName","summary":"<p>Sets the friendly Bluetooth name of the local Bluetooth adapter.</p>\n","description":"<p>The Bluetooth adapter must be turned on before you can set the name. After turning the Bluetooth\non, wait for the <a href=\"/api/modules/bluetooth.html#statechanged\">stateChanged</a> event with <a href=\"/api/modules/bluetooth.html#state_on\">STATE_ON</a>\nto get the updated value.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"parameters":[{"name":"name","summary":"<p>Name for the local Bluetooth adapter. Bluetooth names can be maximum of 248 bytes using UTF-8 encoding. Although, it may vary upon Bluetooth devices. Some can only display first 40 characters, and some may be limited to just 20.</p>\n","type":"String"}],"returns":{"type":"void"}},{"name":"startDiscovery","summary":"<p>Starts the remote device discovery process.</p>\n","description":"<p>This method starts the discovery for the nearby Bluetooth devices. The process of the discovery\ntakes upto 12 seconds.This is an asynchronous call, it will return immediately. Register for\n<a href=\"/api/modules/bluetooth.html#discoverystarted\">discoveryStarted</a> and <a href=\"/api/modules/bluetooth.html#discoveryfinished\">discoveryFinished</a>\nevents to determine exactly when discovery starts and completes. Register for <a href=\"/api/modules/bluetooth.html#devicefound\">deviceFound</a>\nevent to be notified when a nearby device is found. From API level 29 and above make sure\nthat the location services is on in the device to start the scanning process. Device discovery\nwill only find remote devices that are currently in discoverable mode. Many Bluetooth devices\nare not discoverable by default, and need to be entered into a discoverable mode. This method may\nreturn same device multiple times from the <code>deviceFound</code> event in span of 12 seconds.\nIf Bluetooth state is not <a href=\"/api/modules/bluetooth.html#state_on\">STATE_ON</a> or the required permission\nnot granted than this function will return false.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"returns":{"summary":"<p>Returns true to indicate success, or false on immediate error.</p>\n","type":"Boolean"}}],"properties":[{"name":"address","summary":"<p>The hardware address of the local Bluetooth adapter.</p>\n","description":"<p>For example &quot;00:11:22:AA:BB:CC&quot;. This method will only return valid address if the android API &lt; 23.\nOtherwise, it will return a constant value of <code>02:00:00:00:00:00</code>.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"String","permission":"read-only"},{"name":"name","summary":"<p>Friendly name of the local Bluetooth adapter.</p>\n","description":"<p>This name is visible to remote Bluetooth devices. In case of error it can be null.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"String","permission":"read-write"},{"name":"scanMode","summary":"<p>The current Bluetooth scan mode of the local Bluetooth adapter.</p>\n","description":"<p>The Bluetooth scan mode determines if the local adapter is connectable and/or discoverable\nfrom remote Bluetooth devices.\nPossible values are <a href=\"/api/modules/bluetooth.html#scan_mode_connectable\">SCAN_MODE_CONNECTABLE</a>,\n<a href=\"/api/modules/bluetooth.html#scan_mode_connectable_discoverable\">SCAN_MODE_CONNECTABLE_DISCOVERABLE</a>\nand <a href=\"/api/modules/bluetooth.html#scan_mode_none\">SCAN_MODE_NONE</a>.\nIf Bluetooth state is not <a href=\"/api/modules/bluetooth.html#state_on\">STATE_ON</a>, this API will return\n<a href=\"/api/modules/bluetooth.html#scan_mode_none\">SCAN_MODE_NONE</a>.\nAfter turning the Bluetooth on, wait for the <a href=\"/api/modules/bluetooth.html#statechanged\">stateChanged</a>\nevent with STATE_ON to get the updated value. If Bluetooth is not supported on the device,\nthis property returns an error number which is different from the possible values.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"Number","permission":"read-only"},{"name":"state","summary":"<p>The current state of the local Bluetooth adapter.</p>\n","description":"<p>Possible values are <a href=\"/api/modules/bluetooth.html#state_off\">STATE_OFF</a>, <a href=\"/api/modules/bluetooth.html#state_on\">STATE_ON</a>,\n<a href=\"/api/modules/bluetooth.html#state_turning_off\">STATE_TURNING_OFF</a>, <a href=\"/api/modules/bluetooth.html#state_turning_on\">STATE_TURNING_ON</a>\nIf Bluetooth is not supported on the device, this property returns an error number which is different\nfrom the possible values.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"Number","permission":"read-only"}],"constants":[{"name":"DEVICE_TYPE_CLASSIC","summary":"<p>One of the possible values returned by the <a href=\"/api/modules/bluetooth/bluetoothdevice.html#type\">type</a> property.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"Number","permission":"read-only"},{"name":"DEVICE_TYPE_DUAL","summary":"<p>One of the possible values returned by the <a href=\"/api/modules/bluetooth/bluetoothdevice.html#type\">type</a> property.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"Number","permission":"read-only"},{"name":"DEVICE_TYPE_LE","summary":"<p>One of the possible values returned by the <a href=\"/api/modules/bluetooth/bluetoothdevice.html#type\">type</a> property.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"Number","permission":"read-only"},{"name":"DEVICE_TYPE_UNKNOWN","summary":"<p>One of the possible values returned by the <a href=\"/api/modules/bluetooth/bluetoothdevice.html#type\">type</a> property.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"Number","permission":"read-only"},{"name":"SCAN_MODE_CONNECTABLE","summary":"<p>One of the possible values returned by the <a href=\"/api/modules/bluetooth.html#scanmode\">scanMode</a> property.</p>\n","description":"<p>This value indicates that inquiry scan is disabled, but page scan is enabled on the local\nBluetooth adapter. Therefore this device is not discoverable from remote Bluetooth devices,\nbut is connectable from remote Bluetooth devices that have previously discovered this devices.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"Number","permission":"read-only"},{"name":"SCAN_MODE_CONNECTABLE_DISCOVERABLE","summary":"<p>One of the possible values returned by the <a href=\"/api/modules/bluetooth.html#scanmode\">scanMode</a> property.</p>\n","description":"<p>This value indicates that both inquiry scan and page scan are enabled on the local Bluetooth\nadapter. Therefore this device is both discoverable and connectable from remote Bluetooth devices.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"Number","permission":"read-only"},{"name":"SCAN_MODE_NONE","summary":"<p>One of the possible values returned by the <a href=\"/api/modules/bluetooth.html#scanmode\">scanMode</a> property.</p>\n","description":"<p>This value indicated that both inquiry and page scan is disabled on the local Bluetooth\nadapter. Therefore this device neither discoverable nor connectable from the remote Bluetooth\ndevices.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"Number","permission":"read-only"},{"name":"STATE_OFF","summary":"<p>One of the possible values returned by the <a href=\"/api/modules/bluetooth.html#state\">state</a> property. This value indicates that the local Bluetooth adapter is off.</p>\n","description":"<p>Listen for the <a href=\"/api/modules/bluetooth.html#statechanged\">stateChanged</a> event to be notified when the\nlocal Bluetooth adapter is off.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"Number","permission":"read-only"},{"name":"STATE_ON","summary":"<p>One of the possible values returned by the <a href=\"/api/modules/bluetooth.html#state\">state</a> property. This value indicates that the local Bluetooth adapter is on, and ready for use.</p>\n","description":"<p>Listen for the <a href=\"/api/modules/bluetooth.html#statechanged\">stateChanged</a> event to be notified when the\nlocal Bluetooth adapter is on.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"Number","permission":"read-only"},{"name":"STATE_TURNING_OFF","summary":"<p>One of the possible values returned by the <a href=\"/api/modules/bluetooth.html#state\">state</a> property. This value indicates that the local Bluetooth adapter is turning off.</p>\n","description":"<p>Listen for the <a href=\"/api/modules/bluetooth.html#statechanged\">stateChanged</a> event to be notified when the\nlocal Bluetooth adapter is turning off.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"Number","permission":"read-only"},{"name":"STATE_TURNING_ON","summary":"<p>One of the possible values returned by the <a href=\"/api/modules/bluetooth.html#state\">state</a> property. This value indicates that the local Bluetooth adapter is turning on.</p>\n","description":"<p>Listen for the <a href=\"/api/modules/bluetooth.html#statechanged\">stateChanged</a> event to be notified when the\nlocal Bluetooth adapter is turning on.</p>\n","platforms":[{"since":"1.0.0","name":"android"}],"type":"Number","permission":"read-only"}]}
